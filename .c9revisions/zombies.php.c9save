{"ts":1347632860049,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"#!/usr/bin/php\r\n<?php \r\n  $round = 1;\r\n  $points = 0;\r\n  $numzombies = 1;\r\n  $handle = fopen(\"/home/mark/.armagetronad-styct-dedicated/servers/callofduty/var/scorelog.txt\", \"r\");\r\n      while(1)\r\n\t\t{\r\n\t\t  $input = rtrim(fgets(STDIN, 1024)); \r\n\t\t  $line = rtrim(fgets($handle, 1024)); \r\n\t\t  $param = explode(\" \", $input);\r\n\t\t  $paramScoreLog = explode(\" \", $line); \r\n\t\t  $numplayersalive = count($players);\r\n\t\t  $numplayersalive2 = count($playersalive);\r\n\t\t  if ($numplayersalive == 0) {$numplayersalive = $numplayersalive + 1;}\r\n\t\t\tif(preg_match(\"/^INVALID_COMMAND/\", $input))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif($param[4] <= 1 && $param[1] == \"/res\")\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tprint(\"respawn_player {$param[5]} 1 {$randxcoord} {$randycoord} 1 0 \\n\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telseif($param[4] <= 1 && $param[1] == \"/slapall\")\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tforeach ($players as $value)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tprint(\"slap {$value} {$param[5]}\\n\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telseif($param[4] <= 1 && $param[1] == \"/killall\")\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tforeach ($playersalive as $value)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tprint(\"kill {$value} \\n\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telseif($param[4] <= 1 && $param[1] == \"/playerson\")\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tforeach ($players as $value)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tprint(\"console_message {$value}\\n\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telseif($param[4] <= 1 && $param[1] == \"/playersalive\")\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tforeach ($playersalive as $value)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tprint(\"console_message {$value}\\n\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telseif($param[4] > 1)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tprint(\"player_message {$param[2]} \\\"You need to be admin to do custom commands\\\"\\n\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tprint(\"player_message {$param[2]} \\\"That Command Does Not Exist\\\"\\n\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t if(preg_match(\"/^PLAYER_ENTERED/\", $input))\r\n\t\t\t   {\r\n\t\t\t\t  $name = $param[1];\r\n\t\t\t\t  $players[] = $name; \r\n\t\t\t   }\r\n\t\t\t if(preg_match(\"/^PLAYER_LEFT/\", $input))\r\n\t\t\t   {\r\n\t\t\t\t  $remove = array_search($param[1], $players); \r\n\t\t\t\t  unset($players[$remove]); \r\n\t\t\t   }\r\n\t\t\t if(preg_match(\"/^CYCLE_CREATED/\", $input)) \r\n\t\t\t   {\r\n\t\t\t\t  $namealive = $param[1]; \r\n\t\t\t\t  if (!in_array($param[1], $players)) \r\n\t\t\t\t\t  {\r\n\t\t\t\t\t\t  $players[] = $namealive; \r\n\t\t\t\t\t  }\t\r\n\t\t\t\t  $playersalive[] = $namealive; \r\n\t\t\t   }\r\n\t\t\t if (preg_match(\"/^DEATH_FRAG|DEATH_SUICIDE|PLAYER_KILLED|DEATH_SHOT_FRAG|DEATH_DEATHZONE|DEATH_SHOT_SUICIDE|DEATH_TEAMKILL|DEATH_SHOT_TEAMKILL|DEATH_ZOMBIEZONE|DEATH_DEATHSHOT|DEATH_SELF_DESTRUCT/\", $input)) //if he died.....\r\n\t\t\t   {\r\n\t\t\t\t  $remove = array_search($param[1], $playersalive);\r\n\t\t\t\t  unset($playersalive[$remove]);\r\n\t\t\t   }\r\n\t\t\t   if(preg_match(\"/^PLAYER_RENAMED/\", $input))\r\n\t\t\t   {\r\n\t\t\t\t  $nameold = array_search($param[1], $players);\r\n\t\t\t\t  unset($players[$nameold]); \r\n\t\t\t\t  $namenew = $param[2]; \r\n\t\t\t\t  $players[] = $namenew; \r\n\t\t\t   }\r\n\t\t\t   if(preg_match(\"/^ROUND_COMMENCING/\", $input)) \r\n\t\t\t   {\r\n\t\t\t\t  unset($playersalive); \r\n\t\t\t   }\r\n\t\t\t //Control \r\n\t\t\t if (preg_match(\"/^NEW_ROUND/\", $input))\r\n\t\t\t\t{\r\n\t\t\t\t\t$time = 10;\r\n\t\t\t\t\t$round = $round + 1;\r\n\t\t\t\t}\r\n\t\t\t//Spawning Area\r\n\t\t\tif (preg_match(\"/^GAME_TIME/\", $input) && $param[1] == \"1\")\r\n\t\t\t\t{\r\n\t\t\t\t\t$calczombies = $numplayersalive * $round * 4 / 2; \r\n\t\t\t\t\t$divtheplayers = $calczombies / $numplayersalive; \r\n\t\t\t\t\t$numzombies = round($divtheplayers);\r\n\t\t\t\t\tprint(\"kill Lord \\n\");\r\n\t\t\t\t}\r\n\t\t\t\telseif ($param[1] == \"10\")                          \r\n\t\t\t\t  {\t\r\n\t\t\t\t\t  print(\"console_message {$numzombies} \\n\");\r\n\t\t\t\t\t  $istracking = true;\r\n\t\t\t\t\t  $numzombiestrack = $numzombies;\r\n\t\t\t\t\t  for ($i = 0; $i <= $numzombiestrack; $i++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t$time = 2;\r\n\t\t\t\t\t\t\tforeach($playersalive as $value)\r\n\t\t\t\t\t\t\t  {\r\n\t\t\t\t\t\t\t\t$randint2 = rand(1, 3); \r\n\t\t\t\t\t\t\t\t$player = array_rand($playersalive);\r\n\t\t\t\t\t\t\t\tprint(\"DELAY_COMMAND {$time} spawn_zone zombieOwner {$value} Lord 250 250 7 0 \\n\");\r\n\t\t\t\t\t\t\t\t$time = $time + $randint2;\r\n\t\t\t\t\t\t\t\t$numzombiestrack = $numzombiestrack - 1;\r\n\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t }\r\n\t\t\t\t  }\r\n\t\t\tif (strpos($line, \"shenanaboosh'd Lord\"))\r\n\t\t\t\t{\r\n\t\t\t\t\t$points = $points + 50;\r\n\t\t\t\t\tprint(\"console_message hi \\n console_message {$points} \\n\");\r\n\t\t\t\t\t$numzombies = $numzombies - 1;\r\n\t\t\t\t\t\r\n\t\t\t\t}\t\r\n\t\t\tif ($numzombies == 0 && $numplayersalive > 0 && ($istracking))\r\n\t\t\t\t{\r\n\t\t\t\t\tprint(\"center_message Well Done. You Have Cleared Round {$round} \\n\");\r\n\t\t\t\t\tsleep(2);\r\n\t\t\t\t\tforeach ($playersalive as $value)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tprint(\"kill {$value} \\n\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t$istracking = false;\r\n\t\t\t\t}\r\n\t\t\tif ($numplayersalive == 0 && $numzombies > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tprint(\"center_message You have survived to round {$round} \\n\");\r\n\t\t\t\t\tsleep(2);\r\n\t\t\t\t\tforeach ($playersalive as $value)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tprint(\"kill {$value} \\n\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t$round = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\t\r\n\t\t}\r\n?>"]],"start1":0,"start2":0,"length1":0,"length2":4696}]],"length":4696}
